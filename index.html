<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Web3 Hoy ‚Äî Web3 explicado para todos</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üü¢</text></svg>">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--accent:#80ed99;--accent2:#57cc99;--bg:#111111;--card:#1e1e1e}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--bg);color:#e0e0e0;min-height:100vh}
a{color:var(--accent);text-decoration:none}
.header{background:var(--card);border-bottom:2px solid var(--accent);padding:1rem 2rem;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:100;backdrop-filter:blur(10px)}
.logo{font-size:1.6rem;font-weight:800;background:linear-gradient(135deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.tagline{font-size:.8rem;color:#888;margin-top:2px}
.badge{background:var(--accent);color:#000;font-size:.65rem;padding:2px 8px;border-radius:10px;font-weight:700;margin-left:8px}
.search-box{display:flex;gap:8px;align-items:center}
.search-box input{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.1);border-radius:8px;padding:8px 14px;color:#fff;font-size:.85rem;width:220px;outline:none}
.search-box input:focus{border-color:var(--accent)}
.container{max-width:1200px;margin:0 auto;padding:1.5rem}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));gap:1.2rem}
.card{background:var(--card);border-radius:12px;padding:1.4rem;border:1px solid rgba(255,255,255,.05);transition:all .2s;cursor:pointer}
.card:hover{border-color:var(--accent);transform:translateY(-2px);box-shadow:0 8px 30px rgba(0,0,0,.3)}
.card .cat{font-size:.7rem;color:var(--accent);text-transform:uppercase;font-weight:600;letter-spacing:1px;margin-bottom:8px}
.card h2{font-size:1.1rem;font-weight:700;color:#fff;margin-bottom:8px;line-height:1.4}
.card .summary{font-size:.85rem;color:#aaa;line-height:1.6;margin-bottom:10px}
.card .meta{font-size:.72rem;color:#666;display:flex;justify-content:space-between}
.tags{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:8px}
.tag{background:rgba(255,255,255,.06);padding:2px 8px;border-radius:4px;font-size:.68rem;color:#999}
.article-view{display:none;max-width:800px;margin:0 auto;padding:2rem}
.article-view h1{font-size:1.8rem;font-weight:800;color:#fff;margin-bottom:1rem;line-height:1.3}
.article-view .article-meta{color:#888;font-size:.8rem;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid rgba(255,255,255,.1)}
.article-view .article-body{font-size:1rem;line-height:1.8;color:#ccc}
.article-view .article-body h2{color:var(--accent);font-size:1.3rem;margin:1.5rem 0 .8rem}
.article-view .article-body h3{color:var(--accent2);font-size:1.1rem;margin:1.2rem 0 .6rem}
.article-view .article-body p{margin-bottom:1rem}
.article-view .article-body strong{color:#fff}
.article-view .article-body blockquote{border-left:3px solid var(--accent);padding-left:1rem;color:#999;margin:1rem 0}
.article-view .article-body ul,.article-view .article-body ol{margin:1rem 0 1rem 1.5rem}
.article-view .article-body li{margin-bottom:.4rem}
.back-btn{display:inline-flex;align-items:center;gap:6px;color:var(--accent);font-size:.85rem;margin-bottom:1.5rem;cursor:pointer;font-weight:600}
.back-btn:hover{text-decoration:underline}
.loader{text-align:center;padding:3rem;color:#666;font-size:1.1rem}
.filters{display:flex;gap:8px;margin-bottom:1.2rem;flex-wrap:wrap}
.filter-btn{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08);border-radius:20px;padding:6px 14px;font-size:.75rem;color:#aaa;cursor:pointer;transition:all .2s}
.filter-btn:hover,.filter-btn.active{background:var(--accent);color:#000;border-color:var(--accent);font-weight:600}
.hero{background:linear-gradient(135deg,var(--card),var(--bg));border-radius:16px;padding:2.5rem;margin-bottom:1.5rem;border:1px solid rgba(255,255,255,.05)}
.hero h1{font-size:1.5rem;font-weight:800;color:#fff;margin-bottom:.5rem;line-height:1.3}
.hero .summary{color:#aaa;font-size:.9rem;line-height:1.6}
.hero .cat{font-size:.75rem;color:var(--accent);text-transform:uppercase;font-weight:600;letter-spacing:1px;margin-bottom:10px}
footer{text-align:center;padding:2rem;color:#444;font-size:.75rem;border-top:1px solid rgba(255,255,255,.05);margin-top:2rem}
@media(max-width:600px){.header{flex-direction:column;gap:10px}.search-box input{width:100%}.grid{grid-template-columns:1fr}.hero{padding:1.5rem}}
</style>
</head>
<body>
<div class="header">
<div>
<div class="logo">üü¢ Web3 Hoy<span class="badge">ES</span></div>
<div class="tagline">Web3 explicado para todos</div>
</div>
<div class="search-box"><input type="text" id="searchInput" placeholder="Buscar noticias..." oninput="doSearch(this.value)"></div>
</div>
<div class="container" id="mainView">
<div id="heroSection"></div>
<div class="filters" id="filters"></div>
<div class="grid" id="newsGrid"></div>
<div class="loader" id="loader">Cargando noticias...</div>
</div>
<div class="article-view" id="articleView">
<div class="back-btn" onclick="goBack()">‚Üê Volver</div>
<h1 id="artTitle"></h1>
<div class="article-meta" id="artMeta"></div>
<div class="article-body" id="artBody"></div>
</div>
<footer>Web3 Hoy ¬© 2026 ‚Äî Web3 explicado para todos</footer>
<script>
const SB_URL='https://vpvsrjkotstvjywhuacr.supabase.co';
const SB_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZwdnNyamtvdHN0dmp5d2h1YWNyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcyMzE2MzQsImV4cCI6MjA2MjgwNzYzNH0.BDh59N4okIoJB0aOheqp07lYLgd0A4y3Ho1H26xl2jw';
const TABLE='noticiasesp';
let allNews=[],currentFilter='',searchQuery='';

async function loadNews(){
const r=await fetch(`${SB_URL}/rest/v1/${TABLE}?status=eq.publicado&order=created_at.desc&limit=60`,
{headers:{'apikey':SB_KEY,'Authorization':`Bearer ${SB_KEY}`}});
allNews=await r.json();
document.getElementById('loader').style.display='none';
buildFilters();buildHero();renderNews();
checkHash();
}

function buildFilters(){
const cats=[...new Set(allNews.flatMap(n=>(n.hashtags||[]).slice(0,3)))].slice(0,8);
const el=document.getElementById('filters');
el.innerHTML='<div class="filter-btn active" onclick="setFilter(\'\')">Todas</div>'+
cats.map(c=>`<div class="filter-btn" onclick="setFilter('${c}')">#${c}</div>`).join('');
}

function setFilter(f){currentFilter=f;document.querySelectorAll('.filter-btn').forEach(b=>b.classList.toggle('active',b.textContent==='#'+f||(f===''&&b.textContent==='Todas')));renderNews()}

function getFiltered(){
let f=allNews;
if(currentFilter)f=f.filter(n=>(n.hashtags||[]).includes(currentFilter));
if(searchQuery)f=f.filter(n=>(n.titulo_noticia||'').toLowerCase().includes(searchQuery)||(n.resumo_noticia||'').toLowerCase().includes(searchQuery));
return f;
}

function buildHero(){
const el=document.getElementById('heroSection');
if(allNews.length<1){el.innerHTML='<div class="loader">‚è≥ Esperando primeras noticias...</div>';return}
const n=allNews[0];
const cats=(n.hashtags||[]).slice(0,3).map(h=>'#'+h).join(' ¬∑ ');
el.innerHTML=`<div class="hero" onclick="showArticle('${n.slug||n.id}')"><div class="cat">${cats}</div><h1>${n.titulo_noticia}</h1><div class="summary">${(n.resumo_noticia||'').slice(0,250)}...</div></div>`;
}

function renderNews(){
const f=getFiltered(),start=currentFilter||searchQuery?0:1;
const el=document.getElementById('newsGrid');
el.innerHTML=f.slice(start,60).map(n=>{
const cats=(n.hashtags||[]).slice(0,2).map(h=>'#'+h).join(' ¬∑ ');
const tags=(n.hashtags||[]).slice(0,4).map(h=>`<span class="tag">#${h}</span>`).join('');
const date=n.created_at?new Date(n.created_at).toLocaleDateString('es-ES',{day:'numeric',month:'short',year:'numeric'}):''
return`<div class="card" onclick="showArticle('${n.slug||n.id}')"><div class="cat">${cats}</div><h2>${n.titulo_noticia}</h2><div class="summary">${(n.resumo_noticia||'').slice(0,180)}...</div><div class="tags">${tags}</div><div class="meta"><span>${date}</span><span>üìñ Leer m√°s</span></div></div>`}).join('');
}

function parseMarkdown(md){
if(!md)return'';
return md.replace(/^### (.+)$/gm,'<h3>$1</h3>').replace(/^## (.+)$/gm,'<h2>$1</h2>')
.replace(/\*\*(.+?)\*\*/g,'<strong>$1</strong>').replace(/\*(.+?)\*/g,'<em>$1</em>')
.replace(/^> (.+)$/gm,'<blockquote>$1</blockquote>')
.replace(/^- (.+)$/gm,'<li>$1</li>').replace(/(<li>.*<\/li>)/gs,'<ul>$1</ul>')
.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank">$1</a>')
.replace(/

/g,'</p><p>').replace(/^/,'<p>').replace(/$/,'</p>');
}

async function showArticle(slug){
let n=allNews.find(a=>(a.slug||a.id)==slug);
if(!n){
const r=await fetch(`${SB_URL}/rest/v1/${TABLE}?slug=eq.${slug}&limit=1`,{headers:{'apikey':SB_KEY,'Authorization':`Bearer ${SB_KEY}`}});
const d=await r.json();if(d.length)n=d[0];
}
if(!n)return;
document.getElementById('artTitle').textContent=n.titulo_noticia;
const date=n.created_at?new Date(n.created_at).toLocaleDateString('es-ES',{weekday:'long',day:'numeric',month:'long',year:'numeric'}):''
document.getElementById('artMeta').innerHTML=`${date} ¬∑ ${(n.hashtags||[]).map(h=>'<span style="color:var(--accent)">#'+h+'</span>').join(' ')}`;
document.getElementById('artBody').innerHTML=parseMarkdown(n.corpo_noticia||n.resumo_noticia||'');
document.getElementById('mainView').style.display='none';
document.getElementById('articleView').style.display='block';
location.hash='/article/'+slug;window.scrollTo(0,0);
}

function goBack(){document.getElementById('mainView').style.display='';document.getElementById('articleView').style.display='none';location.hash='';}
function doSearch(q){searchQuery=q.toLowerCase();renderNews()}
function checkHash(){const h=location.hash;if(h.startsWith('#/article/'))showArticle(h.replace('#/article/',''))}
window.addEventListener('hashchange',checkHash);
loadNews();
</script>
</body>
</html>